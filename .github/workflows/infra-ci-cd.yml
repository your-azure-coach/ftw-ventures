on:
  workflow_dispatch:
    
  pull_request:
    branches: 
    - main
    paths: 
    - infra
    
name: Infra CI-CD
jobs:
  infra-ci:
    name: Build Infra
    uses: ./.github/workflows/infra-ci-template.yml
          
  infra-cd-dev:
    name: DEV Deploy Infra
    uses: ./.github/workflows/infra-cd-template.yml
    needs: infra-ci
    with:
      ENVIRONMENT_NAME: dev
      ENVIRONMENT_KEY: dev
